<template>
        <style>
            strong {
                color:blue
            }    
            .wrapper{
                border-style: solid;
                border-width: 2px;
                max-width: 150px;
            }
            .title{
                border-bottom-style: solid;
                border-width: 2px;
                /* float: left; */
                text-align: center;
                text-decoration: none;
                font-size: 17px;
            }
            .description{
                display: none;
            }
    
            .toggleStyle{
                display: block;
            }
        </style>
        <div class="wrapper">
            <p class="title"><strong></strong></p>
            <p class="description" id="cardDescription"><small></small></p>
        </div>
    </template>
    
    <script>
    (function(window, document, undefined) {
        // Refers to the "importer", which is index.html
        var thatDoc = document;
    
        // Refers to the "importee", which is src/trello-card.html
        var thisDoc =  (thatDoc._currentScript || thatDoc.currentScript).ownerDocument;
    
        // Gets content from <template>
        var template = thisDoc.querySelector('template').content;
    
        class TrelloCard extends HTMLElement{
    
            constructor() {
                super();

                this.toggleStyle = this.toggleStyle.bind(this);

                this.setAttribute("title", "Default Title");
                this.setAttribute("description", "Default Description");
            }
    
            createdCallback() {
                // Creates the shadow root
                var shadowRoot = this.createShadowRoot();
    
                // Adds a template clone into shadow root
                var clone = thatDoc.importNode(template, true);
                shadowRoot.appendChild(clone);
    
                // Caches <strong> DOM query
                this.strong = shadowRoot.querySelector('strong');
                // Caches <small> DOM query
                this.small = shadowRoot.querySelector('small');
    
                // Checks if the "title" attribute has been overwritten
                if (this.hasAttribute('title')) {
                    var title = this.getAttribute('title');
                    this.setAttribute("title", title);
                    
                    // Sets "title" value into <strong>
                    this.strong.textContent = this.title;
                }
                else {
                    this.setAttribute("title", this.title);
    
                    // Sets "title" value into <strong>
                    this.strong.textContent = this.title;
                }
    
                // Checks if the "description" attribute has been overwritten
                if (this.hasAttribute('description')) {
                    var description = this.getAttribute('description');
                    this.setAttribute("description", description);
                    
                    // Sets "description" value into <small>
                    this.small.textContent = this.description;
                }
                else {
                    this.setAttribute("description", this.description);
    
                    // Sets "description" value into <small>
                    this.small.textContent = this.description;
                }

                this.titleP = this.shadowRoot.querySelector("p");

            }
    
            attachedCallback() {
                this.titleP.addEventListener('click', this.toggleStyle);
            }

            attributeChangedCallback(attr, oldVal, newVal) {
                if (attr === 'title') {
                    this.setAttribute("title", newVal);
    
                    // Sets "title" value into <strong>
                    this.strong.textContent = newVal;
                }

                if (attr === 'description') {
                    this.setAttribute("description", newVal);
    
                    // Sets "description" value into <small>
                    this.small.textContent = newVal;
                }
            }
            
            toggleStyle(event){
                var titleElement = event.target; // strong
                var descriptionElement = titleElement.parentNode.parentNode.querySelector(".description");
                descriptionElement.classList.toggle("toggleStyle");            
            }
    
            // Set the "title" property
            set title(option) {
                this.setAttribute("title", option);
    
                // Sets "title" value into <strong>
                this.strong.textContent = this.title;
            }
    
            // Get the "title" property
            get title() {
                return this.hasAttribute("title");
            }
    
            // Set the "description" property
            set description(option) {
                this.setAttribute("description", option);
    
                // Sets "description" value into <span>
                this.small.textContent = this.description;
            }
    
            // Get the "description" property
            get description() {
                return this.hasAttribute("description");
            }

            
            disconnectedCallback() {
                this.titleP.removeEventListener('click', this.toggleStyle);
            }
        }
    
    
        // Registers <trello-card> in the main document
        window.MyElement = thatDoc.registerElement('trello-card', TrelloCard);
    })(window, document);
    </script>
    